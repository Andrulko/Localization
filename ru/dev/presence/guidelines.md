---
title: Руководство
description: Правила, которым должны следовать все разработчики presence, чтобы добавить свое presence.
published: true
date: 2020-10-24T12:15:26.776Z
tags:
editor: markdown
dateCreated: 2020-06-11T18:04:45.733Z
---

# Руководство

При публикации Presences на GitHub, мы требуем, чтобы вы следовали правилам. Для некоторых эти строгие правила могут показаться тяжелыми. Тем не менее, осуществление этих правил не позволит нам и пользователям столкнуться с какими-либо проблемами.

# Создание

Основные правила развития presence заключаются в следующем:

- Presences **должны** быть связанным с выбранным веб-сайтом.
- Presences **не могут** быть сделаны для незаконных веб-сайтов. (например, стрессоры, маркетинг наркотиков, детская порнография и т.д.)
- Структура файла должна быть чистой и управляемой, не включать файлы, которые не указаны. (например, папки vscode и git, файлы изображений и текста и т. д.)
- Вы должны иметь правильную структуру файла, черновики **не** разрешены.
- Presences для веб-сайтов (`.onion` TLD) или веб-сайтов с бесплатными доменами/хостами (для e.., `.TK` [все бесплатные домены Freenom], `.RF`, `GD`, и т. д.) **не разрешены**, исключения могут быть сделаны, если представлено доказательство того, что они заплатили за домен.
- Presences которые нацелены на внутренние страницы браузера (например, веб-магазин Chrome, ` chrome: // `, ` about: ` и т. д.) ** не разрешены **, поскольку они требуют, чтобы экспериментальный флаг был включен на стороне пользователя и потенциально мог повредить их браузеры.
- Presences с поддержкой только одного субдомена ** не будет ** разрешено, так как они могут показаться неработающими для других страниц (например, домашняя страница), исключения могут быть сделаны для политики и контактных страниц (контент, который используется не часто) или сайтов, где другой контент не связан. (например, страницы википедии)
- Presences низкого качества (или с небольшим контекстом) ** не **разрешено (например, только показывая логотип и текст, но никогда не меняя его)
- Включая папку `dist`, `presence.ts` файл, `iframe.ts` файл, и `metadata.json` файл является обязательным, поэтому результатом будет то, что представлено в следующей схеме:

```bash
presence
├── dist
│   ├── metadata.json
│   └── presence.js
├── presence.ts
└── tsconfig.json
```

или если вы используете `iframe.ts` файл:

```bash
presence
├── dist
│   ├── metadata.json
│   ├── presence.js
│   └── iframe.js
├── presence.ts
├── iframe.ts
└── tsconfig.json
```

## [**metadata.json**](https://docs.premid.app/en/dev/presence/metadata)

> Для удобства наших разработчиков presence, мы предоставили схему, которую вы можете использовать для проверки целостности вашего `metadata` файла. Это совершенно необязательно и не требуется в процессе проверки. 
> 
> {.is-info}

> Настоятельно рекомендуется организовать ваш `metadata` файл в формате, показанном ниже, и вы должны иметь грамматически правильные названия служб, описания, теги и поля настроек. Все, что не соответствует спецификациям, ** не будет ** разрешено. 
> 
> {.is-warning}

> Наличие веб-сайтов с откровенным содержанием **обязательный** иметь `nsfw`тег, а логотип / эскиз должен **не** содержать любой из этого контента. 
> 
> {.is-warning}

Каждое presence имеет файл дескриптора с именем ` metadata.json`, метаданные имеют строгий стандарт, и пример этого файла может быть представлен ниже:

```json
{
  "$schema": "https://schemas.premid.app/metadata/1.0",
  "author": {
    "name": "USER",
    "id": "ID"
  },
  "contributors": [
    {
      "name": "USER",
      "id": "ID"
    }
  ],
  "service": "SERVICE",
  "altnames": ["SERVICE"],
  "description": {
    "en": "DESCRIPTION"
  },
  "url": "URL",
  "version": "VERSION",
  "logo": "URL",
  "thumbnail": "URL",
  "color": "#HEX000",
  "tags": ["TAG1", "TAG2"],
  "category": "CATEGORY",
  "regExp": "REGEXP",
  "iFrameRegExp": "REGEXP",
  "iframe": false,
  "settings": [
    {
      "id": "ID",
      "title": "DISPLAY TITLE",
      "icon": "FONTAWESOME FREE ICON",
      "value": true
    },
    {
      "id": "ID",
      "if": {
        "ID": true
      },
      "title": "DISPLAY TITLE",
      "icon": "FONTAWESOME FREE ICON",
      "value": "\"%song%\" by %artist%",
      "placeholder": "use %song% or %artist%"
    },
    {
      "id": "ID",
      "title": "DISPLAY TITLE",
      "icon": "FONTAWESOME FREE ICON",
      "value": 0,
      "values": ["1", "2", "etc."]
    }
  ]
}
```

> Если поле указано как дополнительное для [ документации](https://docs.premid.app/en/dev/presence/metadata) и ваше presence использует для него значение по умолчанию, не включайте его в файл `metadata`. (например, presence без поддержки iframe не потребует поле `iframe`.) 
> 
> {.is-warning}

> Все картинки в `metadata`файл должен находиться по адресу `i.imgur.com`. Использование контента, размещенного на сайте **не** им разрешено, поскольку они могут неохотно изменять пути и файлы. 
> 
> {.is-warning}

Список полей и их правил перечислены ниже:

### **`$schema`**

- Ключ _схемы_ **должен** содержать знак доллара в начале его действия, это предупредит ваш текстовый редактор, что вы хотите проверить ваш JSON-файл на модель. _Как уже говорилось ранее, вам не нужно включать схему, но если вы включите её, то вы должны принять это во внимание_

### **`author`**

- ID _значение_ **должно** быть вашим Discord snowflake ID. Вы можете получить это включив [режим разработчика](https://support.discord.com/hc/en-us/articles/206346498-Where-can-I-find-my-User-Server-Message-ID-). _ Пожалуйста ** не** путайте это с ID приложения, который предназначен только для вашего presence._

### **`contributors`**

- **не** добавляйте себя в качестве автора и не добавляйте кого-нибудь в качестве автора, если только они не помогли с presence.

### **`service`**

- Имя службы ** должно ** быть именем каталога presence. Например, если presence находится на `/websites/Y/YouTube/`, название сервиса должно быть `YouTube`.
- Ты**отрицательный** Используйте Urrlадрес в качестве имени службы, если веб-сайт не использует Urrlадрес в качестве официального названия. Использование Url-адреса, если имя не является описательным и может считаться неоднозначным **нужно**. (например `YouTube`это разрешено, так как это официальное название и носит описательный характер. `youtube.com` не. `Мяч` это не описательное имя, поэтому использование Url`top.gg` это происходит**нужно**.)

### **`altnames`**

- Используйте это **только** тогда, когда веб-сайт имеет несколько официальных называний (например, Pokémon и 포켓몬스터) или упростить поиск presence без использования специальных символов (например, Pokémon и Pokemon). *Сокращенные* версии названий сервисов идут под `tags`.

### **`description`**

- ** Для всех ** presences ** необходимо ** иметь описание на английском языке независимо от предпочитаемого языка сайта.
- **не** пробуйте перевести описание самостоятельно, если вы не знаете этого языка, переводчики изменят ваши `metadata.json` и изменят описания при необходимости.

### **`url`**

- Ссылка ** должна ** быть строкой, если веб-сайт использует только один домен. Если веб-сайт использует множество, сделайте это массивом и укажите каждый из них.
- Не включайте в ссылку **не** протоколы (например `http` или `https`), и не включать параметры запроса в ссылку (например,`www.google.com/search?gws_rd=ssl` который должен быть `www.google.com`)

### **`version`**

- Всегда проверяйте, что номер версии соответствует [семантическим стандартам версий](https://semver.org), который транслируется в следующую схему: `<NEW-FEATURE>.<HUGE-BUGFIX>.<SMALL-BUGFIX-OR-METADATA-CHANGES>`. Что-нибудь ещё, например `1.0.0.1`, `1.0`, `1`, `1.0.0-BETA` или изменение `1.0.0` to `2.0.0` при исправление ошибки / небольшое изменение ** не ** разрешено.
- Версия ** должна ** всегда начинаться с ` 1.0.0 `, если не указано иное, другие версии ** не ** будут разрешены.

### **`logo`**

- Логотип ** должен ** быть квадратным изображением с соотношением сторон ` 1:1`.
- Для изображения ** требуется ** минимальное разрешение ` 512x512 ` пикселей. Вы можете увеличить изображение, используя такой инструмент, как [ waifu2x ](http://waifu2x.udp.jp/).

### **`thumbnail`**

- Эскиз **должен** предпочтительно быть [широкой рекламной картой](https://i.imgur.com/3QfIc5v.jpg) или [скриншотом](https://i.imgur.com/OAcBmwW.png), если первая **недоступна**.

### **`color`**

- Цвет **должен** быть шестнадцатеричным значением между `#000000` и `#FFFFFF`.
- Цветная строка ** должна ** начинаться с символа #.

### **`tags`**

- **Все** presences должны иметь по крайней мере _один_ тег.
- Теги должны **не** включать пробелы, косые, одинарные/двойные кавычки, символы Unicode, и всегда должны быть строчными буквами.
- Теги **должны** предпочтительно включать альтернативные имена сервисов, чтобы облегчить поиск (например если presence Amazon включало поддержку AWS, у него были бы такие теги, как `amazon-web-services` и `aws`)
- Вы ** обязаны ** добавить тег ` NSFW `, если он предназначен для веб-сайта NSFW.

### **`category`**

- Категория ** должна ** быть одной из следующих, перечисленных в [ документации ](https://docs.premid.app/en/dev/presence/metadata#presence- категории).
- Организация должна использовать категорию, соответствующую содержанию веб-сайта. (например, не используйте `аниме` не имеет отношения к сайту аниме).

### **`regExp`** <br /> **`iFrameRegExp`**

- Регулярные выражения **должны** быть действительными. Пожалуйста, протестируйте свои выражения с инструментами, перечисленными в [документации](https://docs.premid.app/en/dev/presence/metadata#testing).

### **`settings`**

- Если вы решите сделать строку формата (например: `%song% от %artist%`), вы должны иметь переменные окружённый знаком процента с любой стороны. Переменные, такие как `% var `, ` var% ` или ` %%var%% ` и всё что между ними, являются ** не ** допускаемым в целях стандартизации.
- Название настроек **не** будьте со всеми заглавными буквами. Например, такие имена как `ПОКАЗАТЬ СТАТУС ПРОСМОТРА` будем **не** быть разрешенным; однако такие имена, как `Показать статус просмотра` или `Показать статус просмотра` разрешены.

## [**presence.ts**](https://docs.premid.app/en/dev/presence/class)

> Код, который вы пишете **, должен ** быть _хорошо написанным_ и ** должен ** быть _ читабельным_, и все строки должны быть грамматически правильными (грамматические ошибки на сайтах можно игнорировать). 
> 
> {.is-warning}

> Каждый актив следует строгому набору правил линтинга, который будет проверяться в процессе проверки. Несколько предложений можно найти ниже. - [TypeScript Рекомендации плагина для строгой проверки типов](https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/eslint-plugin/docs/rules) - [ESlint Рекомендации](https://eslint.org/docs/rules) 
> 
> {.is-info}

Вот список правил, которые вы должны соблюдать при написании файла `presence.ts`:

- ** Всегда ** объявляйте новый экземпляр класса ` Presence ` перед любой другой переменной, чтобы избежать редких проблем, которые могут возникнуть; это не является обязательным требованием по дизайну, поэтому оно может быть удалено в будущем.
- ** Никогда ** не используйте пользовательские функции, когда [ доступны собственные варианты ](https://docs.premid.app/dev/presence#files-explained); это гарантирует, что исправления на уровне расширения также применимы к вашим presences. Вы можете использовать всё, что вам нужно, если вы не найдете их в документации.
- ** Запрещается** кодировать presence для сайта без добавления поддержки его основного языка (например, presence на YouTube закодировано с поддержкой только для Португальского и Японского, но не самого Английского языка.)
- Поле `smallImageKey` и `smallImageText` предназначено для придания/вторичного контекста (например, `playing/paused` для видео-сайтов, `browsing` для обычных сайтов и других случаев) не рекламировать профили Discord или что-либо, не связанное с PreMiD.
- Вам ** не разрешено ** получить доступ к ` localStorage `.
- При доступе к файлам cookie для сохраненных данных, пожалуйста, префишите ключ с помощью `PMD_`.
- Вы можете отправлять запросы HTTP / HTTPS только на `premid.app` или API веб-сайта присутствия. Если вы используете внешние домены, вам нужно будет объяснить, почему это необходимо.
- Делать **не** установите для полей в объекте данных присутствия значение undefined после его объявления, используйте `delete` ключевое слово вместо этого. (for e.g., use `delete data.startTimestamp` instead of `data.startTimestamp = undefined`)
- Ты **не** разрешено писать присутствия, которые изменяют функциональность данного сайта. Это включает добавление, удаление или модификацию элементов DOM.

## [**tsconfig.json**](https://docs.premid.app/en/dev/presence/tsconfig)

> ** Не ** пишите свой собственный файл ` tsconfig.json `, используйте то, что было предоставлено в [документации](https://docs.premid.app/en/dev/presence/tsconfig). 
> 
> {.is-warning}

# Модификация

> Вы ** должны ** изменить версию в ** metadata ** на более высокое значение по сравнению с предыдущей версией при внесении изменений либо в **sence.ts **, ** iframe.ts ** или ** metadata.json**. 
> 
> {.is-warning}

В некоторых ситуациях presence может вести себя неожиданно или использовать незначительные изменения для улучшения своей функциональности. Вот список правил, которым вы **должны** следовать при изменении presences.

- Вы ** не** можете переписать свой presence или сменить его автора. Если составитель статуса был забанен на официальном сервере или не внес необходимые изменения в течение месяца, вы можете связаться с рецензентом, чтобы узнать, можете ли вы изменить статус.
- Если вы вносите изменения в presence и изменяете не менее ** четверти ** кодовой базы presence's, вы можете добавить себя в качестве участника. Свяжитесь с верификатором для получения дополнительной информации по этому вопросу.   - Если вы вносите изменения в presence и изменяете не менее ** четверти ** кодовой базы presence's, вы можете добавить себя в качестве участника. Проконсультируйтесь с рецензентом для получения дополнительной информации по этой теме.
-  Кто угодно может предоставить исправления для исправления ошибок; но, **не** внести следующие изменения **не** нужно. Допустимые изменения включают общие исправления (код и опечатки), дополнения (комментарии и теги), отсутствующие файлы и т. Д. ** Не ** меняйте изображения, если они не устарели и находятся в спецификациях.

# Верификация

> ** Весь ** код, добавленный в магазин, будет лицензирован в соответствии с `Mozilla Public License 2.0`. 
> 
> {.is-info}

> Если вам нужно связаться с кем-либо, пожалуйста, используйте наш официальный сервер Discord. Все рецензенты будут иметь `Reviewer` роль на их профиле. 
> 
> {.is-info}

> Обратите внимание, что рецензенты добровольно участвуют в работе других репозиториев и управляют ими. Кроме того, ваш запрос на вытягивание не может быть рассмотрен в течение нескольких часов или дней после его создания. 
> 
> {.is-warning}

> ** Всегда ** имейте актуальную ветвь перед созданием запроса. Это поможет ограничить количество ложных срабатываний от контролей. 
> 
> {.is-warning}

Наиболее важным процессом развития presence является получение Вашего presence в магазине. Это делается путем создания [ запроса ](https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request) на GitHub в хранилище ` PreMiD/Presences `. Наши рецензенты проверит, что ваше присутствие соответствует стандартам, и подтолкнут к магазину.

<div>
  <h2 style="font-size: 2rem; margin-bottom: 0;">Рецензенты активов</h2>
  <a href="https://github.com/Bas950"><img src="https://github.com/Bas950.png?size=2048" width="48px" style="max-width:100%; border-radius: 50%;"/></a>
  <a href="https://github.com/doomlerd"><img src="https://github.com/Timeraa.png?size=2048" width="48px" style="max-width:100%; border-radius: 50%;"/></a>
  <a href="https://github.com/frozaum"><img src="https://github.com/ririxichan.png?size=2048" width="48px" style="max-width:100%; border-radius: 50%;"/></a>
  <br />
</div>

## `Ограничение`

Повторяющиеся преступления, такие как нарушение правил, рассылка спама, угрозы или несоответствующее поведение, будут препятствовать вашему творчеству.

В этом сценарии происходят следующие изменения:

- Присутствия под вашим управлением будут переданы боту PreMiD или другому пользователю (решение проверяющего). Идентификатор приложения для каждой сущности воссоздается под новым именем владельца.
- Все ваши проблемы и запросы на снятие средств, созданные после запрета (создание активов, вклад активов и т. д.) будет немедленно закрыт.
- Билеты, созданные на ваше имя для разработки актива, будут удалены.


## `Проверяется`

Несколько вещей, которые вы должны знать после открытия запроса:

- Требуется 2 рецензента, чтобы объединить запрос.
- Если запрос неактивен в течение 14 дней, он будет незамедлительно закрыт.
- Все проверки ** должны** быть пройдены для объединения.
- ⚠️ Вы ** должны ** предоставить новые, без изменений скриншоты (сделанные вами), показывающие параллельное сравнение вашего профиля и веб-сайта, чтобы доказать, что ваше presence работает. Вам разрешено смешивать скриншоты вместе для просмотра удовольствия.</em> Это относится и к созданию, и модификации.
- ⚠️ И Вы тоже **требуемый** чтобы включить скриншоты настроек присутствия в расширение, если оно поставляется. Можно привести пример [здесь](https://imgur.com/a/OD3sj5R).

## `Проверки`

![Проверки](https://i.imgur.com/BCDZQe9.png)

В настоящее время presence проходит 2 отдельных этапа проверки. Все эти элементы управления помогают проверяющим определить, подходит ли ваше присутствие для развертывания.

- `Codacy` это бот, проверяющий качество кода. Если вы когда-либо получаете ошибки по новым проблемам, Вым ** необходимо ** их исправить.
- `Проверка схемы` просканирует файл `metadata.json` для любых ошибок (например, отсутствующие поля, недопустимые типы значений и т.д.). Если вы когда-нибудь увидите какие-либо новые проблемы, Вам также ** необходимо ** исправить их. Добавление поля схемы в файл `metadata.json` позволит вашему текстовому редактору (если поддерживается) показать вам эти ошибки во время разработки.

## `Дополнительные правила`

- **Всегда** убеждайтесь, что вы запускаете ваше presence в наиболее подходящей папке, если его имя начинается с _любой_ Латинской буквы, то он должен находиться в его алфавитном матче (например, `D/dアニメストア` or `G/Google`). Любые другие Unicode / нелатинские символы ** должны ** находиться в папке ` # ` (например, `#/ 巴哈姆特 `) и номера в папке ` 0-9 ` (например, ` 0-9/4anime `).

После того, как вы соблюдаете все руководящие принципы с соответствующими проверками, ваше presence будет объединено с магазином.

# Вклад

`Пересмотр 2` руководящих принципов был написан и был представлен следующими лицами:

<div>
<a href="https://github.com/Alanexei"><img src="https://github.com/Alanexei.png?size=2048" width="48px" style="max-width:100%; border-radius: 50%;"/></a>
</div>

` Пересмотр 1 ` обслуживали следующие лица:

<div>
<a href="https://github.com/Alanexei"><img src="https://github.com/Alanexei.png?size=2048" width="48px" style="max-width:100%; border-radius: 50%;"/></a>
<a href="https://github.com/Bas950"><img src="https://github.com/Bas950.png?size=2048" width="48px" style="max-width:100%; border-radius: 50%;"/></a>
<a href="https://github.com/doomlerd"><img src="https://github.com/doomlerd.png?size=2048" width="48px" style="max-width:100%; border-radius: 50%;"/></a>
</div>
